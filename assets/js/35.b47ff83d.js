(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{234:function(s,t,a){"use strict";a.r(t);var e=a(28),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"centos7搭建git服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#centos7搭建git服务器"}},[s._v("#")]),s._v(" Centos7搭建GIT服务器")]),s._v(" "),a("p",[s._v("环境：Centos7")]),s._v(" "),a("h2",{attrs:{id:"一、-服务端安装git"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、-服务端安装git"}},[s._v("#")]),s._v(" 一、 服务端安装git")]),s._v(" "),a("ul",[a("li",[s._v("第1步：先安装git工具")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("yum  -y "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v("\n")])])]),a("p",[s._v("输入"),a("code",[s._v("git")]),s._v("命令测试，若出现相应的提示说明安装成功。")]),s._v(" "),a("ul",[a("li",[s._v("第2步：新建一个用户起名git")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("adduser "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v("\n")])])]),a("ul",[a("li",[s._v("第3步：在"),a("code",[s._v("/home/git/")]),s._v("目录下创建一个名为"),a("code",[s._v(".ssh")]),s._v("的文件夹，在其.ssh目录中新建一个文件名为"),a("code",[s._v("authorized_keys")]),s._v(",用于保存后面生成的公钥,用于免密码提交。")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home/git\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" .ssh\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" authorized_keys\n")])])]),a("ul",[a("li",[s._v("第4步：在git用户目录创建一个仓库（这里的仓库位置可以随意），名为"),a("code",[s._v("project.git")]),s._v(",在初始化此仓库")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home/git\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" project.git\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" init --bare project.git\n")])])]),a("ul",[a("li",[s._v("第5步：将git用户目录中的仓库和ssh目录的所有者和所属组都设置为git")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home/git\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R git.git project.git/\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R git.git .ssh/\n")])])]),a("ul",[a("li",[s._v("第6步：修改sshd_config文件，打开RSA认证")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/ssh/sshd_config \n")])])]),a("p",[s._v("开启三项：")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v(" RSAAuthentication "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("     \n PubkeyAuthentication "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("     \n AuthorizedKeysFile  .ssh/authorized_keys\n")])])]),a("p",[s._v("为了安全，禁止git用户进行shell登录，只能正常通过ssh使用git")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/passwd\n")])])]),a("p",[s._v("注释")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##git:x:1000:1000::/home/git:/bin/bash")]),s._v("\n")])])]),a("p",[s._v("改为")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("git:x:1000:1000:git version control:/home/git:/usr/bin/git-shell\n")])])]),a("p",[s._v("至此git服务端安装完成。\n现在来测试是否安装成功，这里以window系统测试为例")]),s._v(" "),a("h2",{attrs:{id:"二、客户端测试-克隆git仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、客户端测试-克隆git仓库"}},[s._v("#")]),s._v(" 二、客户端测试-克隆git仓库")]),s._v(" "),a("p",[s._v("需要在客户端安装git工具，linux系统默认有不需要安装，window系统需要\n下载地址：https://git-scm.com/download/win")]),s._v(" "),a("ul",[a("li",[s._v("第1步：生成私钥和公钥，在window系统cmd命令行中输入命令 "),a("code",[s._v("ssh-keygen")]),s._v(" , 一路回车即可，会在当前用户的"),a("code",[s._v(".ssh")]),s._v("目录中生成以下两个文件：")])]),s._v(" "),a("p",[s._v("id_rsa 私钥")]),s._v(" "),a("p",[s._v("id_rsa.pub 公钥")]),s._v(" "),a("p",[s._v("需要将公钥文件内容（id_rsa.pub）提交给git服务器的管理员，他会将此公钥内容添加到服务器的.ssh/authorized_key文件中，一行一个公钥。")]),s._v(" "),a("ul",[a("li",[s._v("第2步：克隆git仓库，到本地目录测试")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone git@xxx.xxx.xxx.xxx:/home/git/project.git  ./\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'first commit'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push origin master\n")])])]),a("p",[s._v("其中xxx.xxx.xxx.xxx为git服务器的ip地址")]),s._v(" "),a("p",[s._v("注：若提示需要密码，则检查上面的公钥和私钥是否配置成功")])])}),[],!1,null,null,null);t.default=n.exports}}]);