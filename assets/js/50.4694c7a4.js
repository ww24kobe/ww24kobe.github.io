(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{249:function(t,s,a){"use strict";a.r(s);var n=a(28),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"模块化commonjs，amd，cmd规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模块化commonjs，amd，cmd规范"}},[t._v("#")]),t._v(" 模块化CommonJS，AMD，CMD规范")]),t._v(" "),a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),a("p",[t._v("随着前端js代码复杂度和代码量的提高，JS中的模块化这个概念逐渐被提出来。")]),t._v(" "),a("h2",{attrs:{id:"模块化的好处"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模块化的好处"}},[t._v("#")]),t._v(" 模块化的好处")]),t._v(" "),a("ul",[a("li",[t._v("提高代码复用率。")]),t._v(" "),a("li",[t._v("方便进行代码的管理。通常一个文件就是一个模块，如"),a("code",[t._v(".js")]),t._v("、"),a("code",[t._v(".vue")]),t._v("模块。")])]),t._v(" "),a("p",[t._v("模块有自己的作用域，只向外暴露特定的变量或函数或对象。")]),t._v(" "),a("p",[t._v("目前流行的js模块化规范有以下几个：")]),t._v(" "),a("ul",[a("li",[t._v("CommonJS （代表作有nodejs）")]),t._v(" "),a("li",[t._v("AMD (代表作有requireJs)")]),t._v(" "),a("li",[t._v("CMD (代表作有seaJs)")])]),t._v(" "),a("p",[t._v("下面就来介绍他们以及他们之间的区别。")]),t._v(" "),a("h2",{attrs:{id:"commonjs规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commonjs规范"}},[t._v("#")]),t._v(" CommonJs规范")]),t._v(" "),a("p",[t._v("Node.js使用的就是commonJS规范。多通过"),a("code",[t._v("module.exports")]),t._v("导出模块，再用"),a("code",[t._v("require")]),t._v("来加载模块。")]),t._v(" "),a("p",[t._v("如定义一个数学相加的模块:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//main.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("n1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("n2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" n1"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("n2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" add"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("使用上面的模块")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" add "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./math.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("CommonJS采用"),a("code",[t._v("require")]),t._v("方法"),a("code",[t._v("同步")]),t._v("加载模块。在服务端，由于模块文件都存在本地磁盘，读取非常快，所以这样做不会有问题。但是在浏览器端，由于网络IO的原因，更合理的方案是采用异步加载。这就是前端浏览器不支持CommonJs模块的原因。")]),t._v(" "),a("h2",{attrs:{id:"amd规范-asynchronous-module-definition"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#amd规范-asynchronous-module-definition"}},[t._v("#")]),t._v(" AMD规范(Asynchronous Module Definition)")]),t._v(" "),a("p",[t._v("AMD是RequireJS在推广出来的时候制定的规范。")]),t._v(" "),a("p",[t._v("AMD规范采用"),a("code",[t._v("异步方式")]),t._v("加载模块，模块的加载不影响它后面语句的运行。所有依赖这个模块的语句，都定义在一个回调函数中，等到加载完成之后，这个回调函数才会运行。")]),t._v(" "),a("p",[a("strong",[t._v("AMD 模块依赖声明方式：")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'b'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// to to ...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("AMD推崇的是"),a("code",[t._v("依赖前置")]),t._v("。可以很直观的看到依赖哪些模块。")]),t._v(" "),a("h2",{attrs:{id:"cmd规范-common-module-definition"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cmd规范-common-module-definition"}},[t._v("#")]),t._v(" CMD规范(Common Module Definition)")]),t._v(" "),a("p",[t._v("CMD是SeaJS在推广出来的时候制定的规范。")]),t._v(" "),a("p",[a("strong",[t._v("CMD 模块依赖声明方式：")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("define")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./a'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" b "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./b'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// more code ..")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("CMD推崇的是"),a("code",[t._v("就近声明")]),t._v("，通过内部require方法进行声明。")]),t._v(" "),a("h2",{attrs:{id:"es6-export-import"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#es6-export-import"}},[t._v("#")]),t._v(" ES6---export/import")]),t._v(" "),a("p",[t._v("在ES6模块化规范诞生之前，Javascript社区以及尝试并提出了AMD、CMA、CommonJS等模块化规范。")]),t._v(" "),a("p",[t._v("但是，这些社区提出的模块化标准，还是有一定的差异性与局限性，并不是浏览器和服务器通用的模块化标准，例如：")]),t._v(" "),a("ul",[a("li",[t._v("AMD和CMD适用于浏览器端的Javascript模块")]),t._v(" "),a("li",[t._v("CommonJS适用于服务端的Javascript模块")])]),t._v(" "),a("p",[t._v("因此，ES6语法规范中，在语言层面上定义了ES6模块化规范，是浏览器端和服务器端通用的模块化开发规范。")]),t._v(" "),a("p",[t._v("在ES6中，每一个js文件都是一个独立的模块，我们可以使用 "),a("code",[t._v("import")]),t._v(" 关键字引入模块，通过 "),a("code",[t._v("export")]),t._v(" 关键字导出模块，也是我们所推崇的，但是由于ES6目前无法在浏览器中完全兼容，当然有些浏览器如chrome支持。在静态页面html中设置如下即可")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("sript type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'module'")]),t._v(" src"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./base.js"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("或者也可以在Node中通过相应插件如"),a("code",[t._v("babel")]),t._v("进行转换在使用。")]),t._v(" "),a("h2",{attrs:{id:"小结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[t._v("#")]),t._v(" 小结")]),t._v(" "),a("ul",[a("li",[t._v("AMD：异步加载模块。代表作有requireJS")]),t._v(" "),a("li",[t._v("CMD：异步加载模块。代表作有SeaJs")]),t._v(" "),a("li",[t._v("上面两者不同点在于：AMD 推崇依赖前置，CMD推崇依赖就近。")]),t._v(" "),a("li",[t._v("CommonJS:多通过module.exports导出模块，再用require来加载模块。只适用于服务端，代表作有nodejs")]),t._v(" "),a("li",[t._v("AMD、CMD用于浏览器端（异步），commonjs用于服务端（同步）。")]),t._v(" "),a("li",[t._v("在ES6中可以通过export导出模块，import导入模块，但浏览器尚未全部支持，需要借助babel等插件。")])]),t._v(" "),a("blockquote",[a("p",[t._v("从编码的习惯，AMD 更加简单且严谨，适用性更广，而在 RequireJS 强力的推动下，在国外几乎成了事实上的异步模块标准，各大类库也相继支持 AMD 规范（如jQuery）。")])])])}),[],!1,null,null,null);s.default=e.exports}}]);